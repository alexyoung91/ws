<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Echo Client</title>
    </head>
    <body>
        <script>
            var interval, i = 0;

            var ws = new WebSocket("ws://localhost:4567");
            ws.binaryType = "arraybuffer";
            ws.onopen = function() {
                console.log("WebSocket connection open");

                /* Send 5 text messages then 5 binary messages then
                 * close connection */
                // interval = setInterval(function() {
                //
                //     if (i < 5) {
                //         var str = i.toString();
                //         ws.send(str);
                //     } else if (i < 10) {
                //         var data = new Uint8Array(1);
                //         data[0] = i;
                //         ws.send(data);
                //     } else {
                //         clearInterval(interval);
                //         ws.close();
                //     }
                //
                //     ++i;
                // }, 100);

                setTimeout(function() { ws.close(); }, 1000);
            };
            ws.onmessage = function(msg) {
                console.log("WebSocket message received:", msg.data);
            };
            ws.onclose = function() {
                console.log("WebSocket connection closed");
            };
            ws.onerror = function() {
                console.log("WebSocket connection error");
            };
        </script>
    </body>
</html>
